<!doctype html>
<html>
	<head>
		<title>{{page.path}}</title>
		<link rel=stylesheet href='//netdna.bootstrapcdn.com/twitter-bootstrap/2.1.0/css/bootstrap-combined.min.css'>
		<script type='text/css' src='http://code.jquery.com/jquery-1.8.1.min.js'></script>
		<script type='text/css' src='//netdna.bootstrapcdn.com/twitter-bootstrap/2.1.0/js/bootstrap.min.js'></script>
		<link rel="stylesheet" href="http://codemirror.net/lib/codemirror.css">
	    <script src="http://codemirror.net/lib/codemirror.js"></script>
		{% if fmt_cm %}
		    <script src="http://codemirror.net/mode/{{fmt_cm}}/{{fmt_cm}}.js"></script>
		{% endif %}
		<style type='text/css'>
			.CodeMirror {
				border: 1px solid #eee;
				border-radius: 5px;
			}
			.CodeMirror-scroll {
				height: auto;
				overflow-y: hidden;
				overflow-x: auto;
			}
		</style>
	</head>
	<body>
		<div class='container'>
			{{content}}
			<hr>
			<form method=post class='form-horizontal'>
				<input type=hidden name='commit_id' value="{{page.commit_id}}">
				<div class='control-group'>
					<textarea name=content rows=20 id='editor' class=span12>{{page.content}}</textarea>
				</div>
				<div class='control-group'>
					<label class="control-label" for=author>Author</label>
					<div class="controls">
						<input type=text name=author class=input-xxlarge value='Example Exampleson <example@example.com>'>
					</div>
				</div>
				<div class='control-group'>
					<label class="control-label" for=commit_msg>Commit Message</label>
					<div class="controls">
						<input type=text name=commit_msg class=input-xxlarge value='Example commit message'>
					</div>
				</div>
				<div class=form-actions>
					<button type=submit class='btn btn-primary btn-large'>Save</button>
				</div>
			</form>
		</div>
		<script>
			var editor = CodeMirror.fromTextArea(document.getElementById("editor"), {
				mode: '{{fmt_cm}}',
				indentUnit: 4,
				tabSize: 4,
				indentWithTabs: true,
				lineWrapping: true
			});
		</script>
	</body>
</html>
